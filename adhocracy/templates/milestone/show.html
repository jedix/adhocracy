<%inherit file="/template.html" />
<%namespace name="components" file="/components.html"/>

<%def name="title()">${c.milestone.title}</%def>

<%def name="breadcrumbs()">${h.milestone.breadcrumbs(c.milestone)|n}</%def>

<%block name="sidebar">
${components.watch(c.milestone)}

<h3 id="information">${_('Informations')}</h3>
<summary>

    <h6>${_('Created')}</h6>
    <p>
<%
created_msg = _("by %s on %s") % (
    h.user.link(c.milestone.creator), 
    h.format_date(c.milestone.create_time))
%>
    ${created_msg|n}
    </p>

    %if c.milestone.modify_time is not None:
    <h6>${_('Last Change')}</h6>
    <p><time>
        ${h.relative_time(c.milestone.modify_time)|n}
    </time></p>
    %endif


</summary>

</%block>

<%block name="main_content">
    <div class="top_actions">
        %if can.milestone.edit(c.milestone):
            <a class="button title edit ttip"
               title="${_('Edit this milestone.')}"
               href="${h.entity_url(c.milestone, member='edit')}">
                ${_("edit")}
            </a>
        %endif
        %if can.milestone.delete(c.milestone):
            <a class="button title delete ttip" 
               title="${_('Delete this milestone.')}"  
               href="${h.entity_url(c.milestone, member='ask_delete')}">
                ${_("delete")}
            </a>
        %endif
        
    </div>
    ${tiles.milestone.header(c.milestone)}

    ${c.tile.text|n}
    <br />

    %if c.show_pages_pager:
    <h3 class="section" id="related-norms">${_("Related Norms")}</h3>
    <div id="pages_table" class="table" style="padding-bottom: 1em;">
        ${c.pages_pager.here()}
    </div>
    %endif

    %if c.show_pages_pager:
    <h3 class="section">${_("Related Proposals")}</h3>
    <div id="proposals_table" class="table">
        ${c.proposals_pager.here()}
    </div>
    %endif

<%components:tutorial>
<ol id="joyRideTipContent">
    <li data-id="FIXME: no id"
        data-tip-location="bottom left" class="custom">
        <p>${_('tutorial_milestone_details_follow')}</p>
    </li>

    <li data-id="milestone-description"
        data-tip-location="bottom left" class="custom">
        <p>${_('tutorial_milestone_details_description')}</p>
    </li>

    <li data-id="related-norms"
        data-tip-location="top left" class="custom">
        <p>${_('tutorial_milestone_details_listing')}</p>
    </li>
</ol>
</%components:tutorial>
</%block>
