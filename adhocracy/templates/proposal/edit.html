<%inherit file="/template.html" />
<%namespace name="tiles_html" file="/proposal/tiles.html"/>
<%namespace name="components" file="/components.html"/>
<%def name="title()">${_("Edit %s") % c.proposal.title}</%def>

<%def name="breadcrumbs()">
    ${h.proposal.breadcrumbs(c.proposal)|n} &raquo; ${_("Edit")}
</%def>

<%block name="main_content">
<div class="form_wrapper">
  <form name="edit_proposal" class="inplace" method="POST" action="/proposal/${c.proposal.id}">
    ${h.field_token()|n}
    <input type="hidden" name="_method" value="PUT" />
      
      <fieldset>
        <legend>${_("Proposal title")}</legend>
        <div class="input_wrapper">
          <label for="label" class="armhint">${_("New Proposal")}</label>
          <input type="text" tabindex="1" class="title armlabel" name="label" value="${c.proposal.title}"/>
        </div>
      </fieldset>

      <fieldset>
        <legend>${_("Proposal goals")}</legend>
        <p class="info">${_("A brief description of <b>the goals</b> of your proposal.")|n}</p>
        <div class="input_wrapper">
          <label for="text" class="armhint">${_("The proposal would...")}</label>
          <textarea tabindex="2" class="description armlabel" rows="${c.text_rows}" name="text">${c.proposal.description.head.text}</textarea>
          ${components.formatting()}
        </div>

        %if c.can_edit_wiki:
        <div class="input_wrapper">
          <label for="wiki">
          <input type="checkbox" ${'checked="checked"' if c.proposal.description.head.wiki == 1 else ''} name="wiki" id="wiki" value="1" />
          ${_("Allow others to edit this proposal.")}</label>
        </div>
        %endif

        %if c.instance.milestones:
        <div class="input_wrapper">
          <label for="milestone">${_("Relates to a milestone")}</label>
          ${tiles.milestone.select(c.proposal.milestone)}
        </div>        
        %endif
      </fieldset>
    
      <div class="input_wrapper">
        ${components.form_watch(c.proposal)}
      </div>    

      <div class="input_wrapper submit">
        ${components.savebox("/proposal/%s" % c.proposal.id)}
      </div>
  </form>
</div>
</%block>

<%block name="sidebar">
        <div class="help">
            <h3>${_("Help")}</h3>
            <ul>
                <li>${h.help_link(_("What is a proposal?"), 'proposal_faq', anchor='whatis')|n}</li>
                <li>${h.help_link(_("How can I support a proposal?"), 'proposal_faq', anchor='support')|n}</li>
                <li>${h.help_link(_("Guide: Supporting proposals"), 'support_text')|n}</li>
                <li>${h.help_link(_("Guide: Developing proposals"), 'proposal_text')|n}</li>
                <li>${h.help_link(_("More help..."), 'proposal_faq')|n}</li>
            </ul>
        </div>
</%block>    

    
