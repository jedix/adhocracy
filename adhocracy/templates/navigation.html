<%def name="nav_link(href, text, class_, id_='', title='')">
<li class="${class_ or ''}" id="${id_}">
    <a href="${href}" title="${title}">${text}</a>
</li>
</%def>


<%def name="global_nav(active)">

<% 
   active_nav = {}
   active_nav[active] = 'current'

%>
<!-- begin: main navi -->
<nav>
    <div id="nav">
        <!-- skiplink anchor: navigation -->
        <a id="navigation" name="navigation"></a>
        <!-- main navigation: horizontal list -->
        <div class="menu hlist">
            <ul>
                <li class="${active_nav.get('home', '')}">
                <a href="${h.base_url(None, path='/')}">${_("Home")}</a></li>

                %if g.single_instance is None:
                <li class="${active_nav.get('instances', '')}"><a class="ttip" 
                       href="${h.base_url(None, path='/instance')}"
                       title="${_('All instances')}">${_("Instances")}</a></li>
                %endif

                %if c.user:
                <li class="${active_nav.get('watchlist', '')}"><a class="ttip"
                       href="${h.entity_url(c.user, member='watchlist')}" 
                       title="${_('All instances')}">${_("Watchlist")}</a></li>
                %endif
                <!-- FIXME: implemente About -->
                <li class="${active_nav.get('about', '')}"><a href="#" 
                       >${_('About')}</a></li>

                <li  class="${active_nav.get('help', '')}"
                     id="nav_help"><a class="" 
                                      href="${h.base_url(None, path='/static/help.html')}">${_("Help")}</a></li>

                <!-- FIXME: implemente personal drop down menu -->
                %if c.user:
                <li class="${active_nav.get('user', '')}">
                    <a title="${_('Your profile')}" href="${h.entity_url(c.user)}">
                        <!-- FIXME: User image <img width="16" height="16" 
                             src="${h.user.icon_url(c.user, size=16)|n}" /> --> 
                        ${c.user.name}
                    </a>
                </li>
                %else:
                <li class="${active_nav.get('login', '')}">
                    <a href="/login">${_("Login")}</a> 
                    <!-- FIXME: <a href="/register">${_("Register")}</a> -->

                </li>
                %endif
            </ul>
        </div>
    </div>
</nav>
</%def>


<%def name="subheader_instance_navigation(active, logo, show_search=True)">

<% 
   active_subnav = {}
   active_subnav[active] = 'current'

   def _class(identifier):
       return active_subnav.get(identifier, '')
%>

  <div id="subheader">
    <div class="page_margins">
      <div class="page_wrapper">
        <!-- begin: sub navi -->
        %if logo:
        <div id="organisation_logo">
          <img src="${logo}" />
        </div>
        %endif
        <!-- begin: sub navi -->
        <nav>
          <div class="hlist">
            <ul id="subnav">

                ${nav_link(href="#",
                           text=_("Instance"),
                           class_=_class('instance'))}

                ${nav_link(href="#",
                           text=_("Milestones"),
                           class_=_class('milestones'))}

                ${nav_link(href="#",
                           text=_("Diskussions"),
                           class_=_class('discussions'))}

                ${nav_link(href="#",
                           text=_("Norms"),
                           class_=_class('norms'))}

                ${nav_link(href="#",
                           text=_("Members"),
                           class_=_class('members'))}

                ${nav_link(href="#",
                           text=_("Settings"),
                           class_=(_class('settings') + ' settings'))}

            </ul>
          </div>
        </nav>
        %if show_search:
        <div id="searchbox">
          <form action="http://liquid-democracy.staging_wordpress.adhocracy.cc/" 
                id="searchform" method="get">
            <div class="label_over">
              <label class="over-apply" for="s">In Die Linke suchen&hellip;</label>
              <input type="text" id="s" name="s" value="" />
            </div>
            <input type="submit" value="Los" id="searchsubmit" />
          </form>
        </div>
        %endif
      </div>
    </div>
  </div>

</%def>
