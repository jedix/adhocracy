<%inherit file="/template.html" />
<%namespace name="components" file="/components.html"/>
<%namespace name="comment_tiles" file="/comment/tiles.html"/>
<%namespace name="state" file="/poll/state.html"/>

<%def name="title()">${c.page.title}</%def>

<%def name="breadcrumbs()">${h.breadcrumbs(c.text)|n}</%def>

${tiles.page.header(c.page, c.tile, active='view', text=c.text)}

<div class="sidebar">
	<h3 class="section">${_("Variants")}</h3>
	<ul>
		%for variant in c.page.variants:
			<li>
				<%
				text = c.page.variant_head(variant)
				%>
				<a href="${h.entity_url(text)}">
				%if variant == c.model.Text.HEAD:
					<b>(status quo)</b>
				%else:
					<code>${variant}</code>
				%endif
				</a>
				@ rev <code>#${text.id}</code>
				</li>
		%endfor
	</ul>
	
	<h3 class="section">${_("history")}</h3>
	<ul>
		%for text in c.page.texts:
			<li><code><a href="${h.entity_url(text)}">#${text.id}</a></code>: ${text.user.name} at ${text.create_time.date()}, VAR <code>${text.variant}</code></li>
		%endfor
	</ul>
	
</div>

<div class="mainbar">
	%if c.text.variant != c.model.Text.HEAD:
		<div class="infobox">${_("Currently showing the %s variant") % c.text.variant}</div>
	%endif
	${c.text.render()|n}
</div>
